import common.DatabaseAccess;
import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;

public class VulnerableClass {

  public static void makingUserIntoAnAdministrator(Connection connection, String username) {

    String userLoginQuery = "SELECT * FROM users WHERE username = '" + username + "'";

    try {
      Statement statement = connection.createStatement();
      ResultSet rs = statement.executeQuery(userLoginQuery);
      while(rs.next()) {
        System.out.println(rs.getString("user_id") + "\t" + rs.getString("password"));
      }
    } catch (SQLException e) {
      e.printStackTrace();
    }
  }
  public static void main(String[] args) {
    Connection connection = DatabaseAccess.getConnection();
    String username = "any' OR '1' = '1";
    makingUserIntoAnAdministrator(connection, username);
  }
}
